<% record_id = record.present? ? dom_id(record) : '' %>
<% if format == :html %>
  <%= tag.div id: "infinite-scroll-pagination-#{record_id}" do %>
    <div data-controller="infinite-scroll" data-infinite-scroll-next-page-url-value="<%= pagy_url_for(pagy, next_page) %>"
                                           data-infinite-scroll-next-page-value="<%= next_page %>">
      <div data-infinite-scroll-target="scrollArea"></div>
      <div class="d-flex justify-content-center">
        <div class="spinner-border pinmapper m-4 d-none" data-infinite-scroll-target="spinner"></div>
      </div>
    </div>
  <% end  %>
<% elsif format == :turbo_stream %>
  <%= turbo_stream.update "infinite-scroll-pagination-#{record_id}" do %>
    <div data-controller="infinite-scroll" data-infinite-scroll-next-page-url-value="<%= pagy_url_for(pagy, next_page) %>"
                                           data-infinite-scroll-next-page-value="<%= next_page %>">
      <div data-infinite-scroll-target="scrollArea"></div>
      <div class="d-flex justify-content-center">
        <div class="spinner-border pinmapper m-4 d-none" data-infinite-scroll-target="spinner"></div>
      </div>
    </div>
  <% end  %>
<% end %>